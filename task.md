# Тестовое задание

Здравствуйте, **Владислав**!

Простите за столь долгое ожидание, высылаю вам тестовое задание для вакансии **Junior Python Developer**.

## :dart: Цель

Нужно разработать **веб-сервис** для **мониторинга** **загрузки ядер процессора**.

Метрики должны **обновляться каждые 5 секунд** и **сохраняться в базу данных**.

Веб-сервис должен располагать **HTTP API** для получения метрик.

Описание **API** представлено ниже, вам нужно будет ее реализовать.

### :clipboard: API

#### Получение метрик загрузки ядра процессора

Метод: `GET` Путь: `/usage/<core>`

##### Переменные пути

* `core` — ядро процессора. Переменная `all` для всех ядер, для остальных — целое число.

##### Параметры запроса

* **@optional** `per` — количество секунд, по умолчанию **3600 секунд**.

##### Описание

Получение метрик загрузки ядра процессора за указанное количество секунд.

##### Удачный запрос

Код ответа: `200 OK` Тип контента: `application/json`

Ниже приведен пример JSON, который должен быть в ответе.

```json5
{
  core: "all",
  usage: [
    [
      1.0,
      2.5,
    ],
    [
      1.0,
      1.5,
    ],
  ],
  per: 10
}
```

##### Неудачный запрос

###### Некорректное ядро процессора

Код ответа: `400 Bad Request`

Возникает, когда указанного ядра процессора не существует.

#### Получение усредненной загрузки ядра процессора

Метод: `GET` Путь: `/average/<core>`

##### Переменные пути

* `core` — ядро процессора. Переменная `all` для всех ядер, для остальных — целое число.

##### Параметры запроса

* **@optional** `per` — количество секунд, по умолчанию **3600 секунд**.

##### Описание

Получение усредненной загрузки ядра процессора за указанное количество секунд.

##### Удачный запрос

Код ответа: `200 OK` Тип контента: `application/json`

Ниже приведен пример JSON, который должен быть в ответе.

```json5
{
  core: "all",
  usage: [
    2.0,
    1.5
  ],
  per: 15
}
```

##### Неудачный запрос

###### Некорректное ядро процессора

Код ответа: `400 Bad Request`

Возникает, когда указанного ядра процессора не существует.

### :package: Требования к зависимостям

Для сборки и обслуживания проекта должен использоваться **Poetry**.

В качестве веб-фреймворка нужно применить **Flask**.

К базе данных нет требований, но для удобства разработки советую применить **SQLite**.

### :briefcase: Договоренности по стилю кода

Весь **исходный код** должен содержаться в папке `sources` внутри проекта.

Все **тесты исходного кода**, если таковые имеются, должны содержаться в папке `tests` внутри проекта.

Исходный код **должен быть** максимально **покрыт аннотациями типов**.

Строгое следование **PEP 8**, только в редких случаях позволяется от него отступать.

### :card_index: Задачи к выполнению

* [x] Создать новый проект.
    * [x] Инициализировать новый проект с **Poetry**.
    * [x] Указать название проекта в `pyproject.toml`.
    * [x] Указать версию проекта в `pyproject.toml`.
    * [x] Указать автора проекта в `pyproject.toml`.
    * [ ] (Опционально) Указать лицензию проекта в `pyproject.toml`.
    * [ ] (Опционально) Указать README.md проекта в `pyproject.toml`.
* [ ] Установить зависимости.
    * [x] Установить **зависимости** для **веб-сервиса**.
    * [ ] (Опционально) Установить **зависимости** для **разработки**.
* [ ] Реализовать веб-сервис.
    * [ ] Реализовать **получение метрик** загрузки ядер процессора.
    * [ ] Реализовать **сохранение метрик** загрузки ядер процессора.
    * [ ] (Опционально) Реализовать **удаление метрик** загрузки ядер процессора.
    * [ ] Реализовать **HTTP API** для веб-сервиса.
        * [ ] Получение **метрик** загрузки ядра процессора.
        * [ ] Получение **усредненной** загрузки ядра процессора.
* [ ] Протестировать веб-сервис.
    * [ ] Протестировать получение **метрик** загрузки ядра процессора.
    * [ ] Протестировать получение **усредненной** загрузки ядра процессора.
    * [ ] (Опционально) Реализовать автоматизированное тестирование.
* [ ] Развернуть веб-сервис.
    * [ ] Выбрать способ развертывания веб-сервиса.
    * [ ] Описать **Dockerfile**, и **Docker Compose**, если того требует веб-сервис.
    * [ ] Описать инструкции по развертыванию веб-сервиса.

Каждая из задач будет оцениваться от **0** до **3 баллов**, кроме **опциональных задач**.

За каждую выполненную категорию задач добавляется **3 балла**.

Выполнение **опциональной задачи** в любом виде дает **3 балла**.

Если задача **выполнена отлично** — **3 балла**, если **выполнена сомнительно** от **1** до **2 баллов**, если **выполнена плохо** или **не выполнена вовсе** — **0 баллов**.

Для успешного прохождения нужно набрать больше **60 баллов** по итогам рецензирования исходного кода.

### :love_letter: Личная просьба

Пожалуйста, пользуйтесь **Git** и **GitHub** правильно, почитайте про **GitHub Flow** и делайте **своевременные коммиты** с
**информативными сообщениями**.

Пишите **документацию** к своему исходному коду, **помечайте комментариями** места, где сомневаетесь в реализации или у вас возникают вопросы.
Будьте вольны оставлять **FIXME** и **TODO** в исходном коде, во время рецензирования мы их обязательно затронем.